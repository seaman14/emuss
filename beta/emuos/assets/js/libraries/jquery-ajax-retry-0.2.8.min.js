!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(b,c){var d=c.times,e=b.timeout;return function(f,g,h){function i(){a.ajax(j).retry({times:d-1,timeout:c.timeout,statusCodes:c.statusCodes}).then(k.resolve,k.reject)}var j=this,k=new a.Deferred,l=b.getResponseHeader("Retry-After");return d>1&&(!b.statusCodes||a.inArray(f.status,b.statusCodes)>-1)&&(!b.notStatusCodes||-1===a.inArray(f.status,b.notStatusCodes))?(l&&(e=isNaN(l)?new Date(l).getTime()-a.now():1e3*parseInt(l,10),(isNaN(e)||0>e)&&(e=b.timeout)),void 0!==e?setTimeout(i,e):i()):k.rejectWith(this,arguments),k}}a.ajaxPrefilter(function(a,c,d){d.retry=function(a){return a.timeout&&(this.timeout=a.timeout),a.statusCodes&&(this.statusCodes=a.statusCodes),a.notStatusCodes&&(this.notStatusCodes=a.notStatusCodes),this.then(null,b(this,a))}})});