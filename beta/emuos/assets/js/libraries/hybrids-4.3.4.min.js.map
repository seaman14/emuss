{"version":3,"sources":["webpack://hybrids/webpack/universalModuleDefinition","webpack://hybrids/webpack/bootstrap","webpack://hybrids/./src/utils.js","webpack://hybrids/./src/property.js","webpack://hybrids/./src/render.js","webpack://hybrids/./src/emitter.js","webpack://hybrids/./src/cache.js","webpack://hybrids/./src/define.js","webpack://hybrids/./src/parent.js","webpack://hybrids/./src/children.js","webpack://hybrids/./src/store.js","webpack://hybrids/./src/template/utils.js","webpack://hybrids/./src/template/resolvers/array.js","webpack://hybrids/./src/template/resolvers/value.js","webpack://hybrids/./src/template/resolvers/event.js","webpack://hybrids/./src/template/resolvers/class.js","webpack://hybrids/./src/template/resolvers/style.js","webpack://hybrids/./src/template/resolvers/property.js","webpack://hybrids/./src/template/core.js","webpack://hybrids/./src/template/helpers.js","webpack://hybrids/./src/template/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","camelToDashMap","Map","camelToDash","str","result","undefined","replace","toLowerCase","set","dispatch","host","eventType","options","dispatchEvent","CustomEvent","bubbles","shadyCSS","fn","fallback","shady","ShadyCSS","nativeShadow","IS_IE","storePointer","Promise","resolve","WeakMap","defaultTransform","v","objectTransform","TypeError","freeze","connect","type","transform","String","Number","Boolean","val","oldValue","invalidate","attrName","hasAttribute","attrValue","getAttribute","render","customOptions","shadowRoot","shadowRootInit","assign","update","target","attachShadow","observe","flush","callbacks","queue","Set","execute","forEach","delete","e","size","requestAnimationFrame","add","entries","getEntry","targetMap","entry","contexts","deps","state","checksum","observed","calculateChecksum","depEntry","dispatchDeep","emitter","contextStack","validate","has","Error","context","nextValue","restoreDeepDeps","setter","newValue","gcList","invalidateEntry","clearValue","deleteValue","clear","deleteEntry","invalidateAll","lastValue","unsubscribe","cb","defaultMethod","callbacksMap","propsMap","disconnects","defineElement","tagName","hybridsOrConstructor","CustomElement","customElements","hybrids","Hybrid","props","index","length","list","this","push","HTMLElement","descriptors","keys","config","desc","Array","isArray","cache","configurable","process","unshift","compile","defineMap","elements","reduce","acc","parent","hybridsOrFn","node","parentElement","parentNode","constructor","walk","items","from","children","child","deep","nested","observer","MutationObserver","childList","subtree","disconnect","currentTimestamp","Date","now","definitions","model","lastModel","resolveWithInvalidate","external","error","sync","id","getCurrentTimestamp","timestamps","getTimestamp","timestamp","setTimestamp","setupStorage","storage","cachedModel","memoryStorage","values","bootstrap","Model","lists","stringifyModel","modelConfig","setupModel","placeholder","listPlaceholderPrototype","isInstance","getPrototypeOf","data","dataConfig","pending","_","store","setupListModel","getTypeConstructor","stateSetter","h","setModelState","stateGetter","getModelState","uuid","temp","Math","random","toString","validationMap","msg","JSON","stringify","resolvedPromise","configs","invalidatePromise","checks","then","filter","map","defaultValue","check","valueOf","resolveKey","nestedType","Constructor","defaultArray","localConfig","nestedOptions","loose","nestedConfig","resultModel","nestedData","getOwnPropertyNames","resolveTimestamp","mapError","err","suppressLog","stringId","sort","stringifyId","validContexts","catch","draftMap","getValidationError","errors","join","ready","mapValueWithState","getValuesFromModel","required","draft","createMode","setState","localModel","isDraft","lastError","hasErrors","indexOf","checkResult","resultId","reject","submit","resolvedModel","errorMessage","RegExp","test","dataMap","getTemplateEnd","endNode","removeTemplate","nodeType","Node","TEXT_NODE","childNodes","removeChild","startNode","lastNextSibling","nextSibling","arrayMap","movePlaceholder","previousSibling","insertBefore","prevNode","nextNode","resolveValue","textContent","lastEntries","item","available","ids","lastIndex","matchedEntry","document","createTextNode","resolveArray","targets","classMap","resolveClassList","previousList","className","normalizeValue","classList","remove","styleMap","resolveStyle","stringifyElement","previousMap","nextMap","dashKey","styleValue","style","setProperty","removeProperty","resolveProperty","propertyName","isSVG","substr","eventMap","removeEventListener","callback","addEventListener","resolveEventListener","resolveStyleList","SVGElement","removeAttribute","setAttribute","TIMESTAMP","getPlaceholder","PLACEHOLDER_REGEXP_TEXT","PLACEHOLDER_REGEXP_EQUAL","PLACEHOLDER_REGEXP_ALL","ATTR_PREFIX","ATTR_REGEXP","preparedTemplates","createWalker","ShadyDOM","inUse","createTreeWalker","NodeFilter","SHOW_ELEMENT","SHOW_TEXT","container","createElement","styleSheetsMap","compileTemplate","rawParts","styles","template","parts","signature","part","slice","match","createSignature","innerHTML","content","appendChild","svgRoot","firstChild","fragment","iterator","createNodeIterator","SHOW_COMMENT","replaceComments","compileWalker","compileIndex","currentNode","text","results","pop","split","before","next","equal","ELEMENT_NODE","attributes","attr","trim","partialName","args","styleSheets","prevArgs","importNode","clone","cloneNode","querySelectorAll","count","prepareTemplate","applyShadyCSS","renderWalker","clonedParts","renderIndex","currentPart","shift","markers","previousChild","adoptedStyleSheets","isEqual","CSSStyleSheet","styleSheet","replaceSync","marker","styleSubtree","styleElement","checked","files","getPartialObject","reverse","stringCache","storeValues","valueOrPath","event","arguments","promiseMap","promise","delay","timeout","setTimeout","clearTimeout","PLACEHOLDER","SVG_PLACEHOLDER","STYLE_IMPORT_REGEXP","templatesMap","stylesMap","methods","defineElements","createTemplate","hasAdoptedStyleSheets","joinedStyles","html","svg","helpers"],"mappings":"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","file":"hybrids.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hybrids\"] = factory();\n\telse\n\t\troot[\"hybrids\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const camelToDashMap = new Map();\nexport function camelToDash(str) {\n  let result = camelToDashMap.get(str);\n  if (result === undefined) {\n    result = str.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase();\n    camelToDashMap.set(str, result);\n  }\n  return result;\n}\n\nexport function pascalToDash(str) {\n  return camelToDash(str.replace(/((?!([A-Z]{2}|^))[A-Z])/g, \"-$1\"));\n}\n\nexport function dispatch(host, eventType, options = {}) {\n  return host.dispatchEvent(\n    new CustomEvent(eventType, { bubbles: false, ...options }),\n  );\n}\n\nexport function shadyCSS(fn, fallback) {\n  const shady = window.ShadyCSS;\n\n  /* istanbul ignore next */\n  if (shady && !shady.nativeShadow) {\n    return fn(shady);\n  }\n\n  return fallback;\n}\n\nexport function stringifyElement(target) {\n  return `<${String(target.tagName).toLowerCase()}>`;\n}\n\nexport const IS_IE = \"ActiveXObject\" in window;\nexport const deferred = Promise.resolve();\n\nexport const storePointer = new WeakMap();\n","import { camelToDash } from \"./utils.js\";\n\nconst defaultTransform = v => v;\n\nconst objectTransform = value => {\n  if (typeof value !== \"object\") {\n    throw TypeError(`Assigned value must be an object: ${typeof value}`);\n  }\n  return value && Object.freeze(value);\n};\n\nexport default function property(value, connect) {\n  const type = typeof value;\n  let transform = defaultTransform;\n\n  switch (type) {\n    case \"string\":\n      transform = String;\n      break;\n    case \"number\":\n      transform = Number;\n      break;\n    case \"boolean\":\n      transform = Boolean;\n      break;\n    case \"function\":\n      transform = value;\n      value = transform();\n      break;\n    case \"object\":\n      if (value) Object.freeze(value);\n      transform = objectTransform;\n      break;\n    default:\n      break;\n  }\n\n  return {\n    get: (host, val = value) => val,\n    set: (host, val, oldValue) => transform(val, oldValue),\n    connect:\n      type !== \"object\" && type !== \"undefined\"\n        ? (host, key, invalidate) => {\n            if (host[key] === value) {\n              const attrName = camelToDash(key);\n\n              if (host.hasAttribute(attrName)) {\n                const attrValue = host.getAttribute(attrName);\n                host[key] =\n                  attrValue === \"\" && transform === Boolean ? true : attrValue;\n              }\n            }\n\n            return connect && connect(host, key, invalidate);\n          }\n        : connect,\n  };\n}\n","export default function render(fn, customOptions = {}) {\n  if (typeof fn !== \"function\") {\n    throw TypeError(`The first argument must be a function: ${typeof fn}`);\n  }\n\n  const options = { shadowRoot: true, ...customOptions };\n  const shadowRootInit = { mode: \"open\" };\n\n  if (typeof options.shadowRoot === \"object\") {\n    Object.assign(shadowRootInit, options.shadowRoot);\n  }\n\n  return {\n    get(host) {\n      const update = fn(host);\n      let target = host;\n\n      if (options.shadowRoot) {\n        if (!host.shadowRoot) host.attachShadow(shadowRootInit);\n        target = host.shadowRoot;\n      }\n\n      return function flush() {\n        update(host, target);\n        return target;\n      };\n    },\n    observe(host, flush) {\n      flush();\n    },\n  };\n}\n","const callbacks = new WeakMap();\nconst queue = new Set();\n\nfunction execute() {\n  try {\n    queue.forEach(target => {\n      try {\n        callbacks.get(target)();\n        queue.delete(target);\n      } catch (e) {\n        queue.delete(target);\n        throw e;\n      }\n    });\n  } catch (e) {\n    if (queue.size) execute();\n    throw e;\n  }\n}\n\nexport function dispatch(target) {\n  if (!queue.size) {\n    requestAnimationFrame(execute);\n  }\n  queue.add(target);\n}\n\nexport function subscribe(target, cb) {\n  callbacks.set(target, cb);\n  dispatch(target);\n\n  return function unsubscribe() {\n    queue.delete(target);\n    callbacks.delete(target);\n  };\n}\n","import * as emitter from \"./emitter.js\";\n\nconst entries = new WeakMap();\nexport function getEntry(target, key) {\n  let targetMap = entries.get(target);\n  if (!targetMap) {\n    targetMap = new Map();\n    entries.set(target, targetMap);\n  }\n\n  let entry = targetMap.get(key);\n\n  if (!entry) {\n    entry = {\n      target,\n      key,\n      value: undefined,\n      contexts: undefined,\n      deps: undefined,\n      state: 0,\n      checksum: 0,\n      observed: false,\n    };\n    targetMap.set(key, entry);\n  }\n\n  return entry;\n}\n\nexport function getEntries(target) {\n  const result = [];\n  const targetMap = entries.get(target);\n  if (targetMap) {\n    targetMap.forEach(entry => {\n      result.push(entry);\n    });\n  }\n  return result;\n}\n\nfunction calculateChecksum(entry) {\n  let checksum = entry.state;\n  if (entry.deps) {\n    entry.deps.forEach(depEntry => {\n      checksum += depEntry.state;\n    });\n  }\n\n  return checksum;\n}\n\nfunction dispatchDeep(entry) {\n  if (entry.observed) emitter.dispatch(entry);\n  if (entry.contexts) entry.contexts.forEach(dispatchDeep);\n}\n\nfunction restoreDeepDeps(entry, deps) {\n  if (deps) {\n    deps.forEach(depEntry => {\n      entry.deps.add(depEntry);\n\n      if (entry.observed) {\n        /* istanbul ignore if */\n        if (!depEntry.contexts) depEntry.contexts = new Set();\n        depEntry.contexts.add(entry);\n      }\n\n      restoreDeepDeps(entry, depEntry.deps);\n    });\n  }\n}\n\nconst contextStack = new Set();\nexport function get(target, key, getter, validate) {\n  const entry = getEntry(target, key);\n\n  if (contextStack.size && contextStack.has(entry)) {\n    throw Error(`Circular get invocation is forbidden: '${key}'`);\n  }\n\n  contextStack.forEach(context => {\n    if (!context.deps) context.deps = new Set();\n    context.deps.add(entry);\n\n    if (context.observed) {\n      if (!entry.contexts) entry.contexts = new Set();\n      entry.contexts.add(context);\n    }\n  });\n\n  if (\n    ((validate && validate(entry.value)) || !validate) &&\n    entry.checksum &&\n    entry.checksum === calculateChecksum(entry)\n  ) {\n    return entry.value;\n  }\n\n  try {\n    contextStack.add(entry);\n\n    if (entry.observed && entry.deps && entry.deps.size) {\n      entry.deps.forEach(depEntry => {\n        /* istanbul ignore else */\n        if (depEntry.contexts) depEntry.contexts.delete(entry);\n      });\n    }\n\n    entry.deps = undefined;\n    const nextValue = getter(target, entry.value);\n\n    if (entry.deps) {\n      entry.deps.forEach(depEntry => {\n        restoreDeepDeps(entry, depEntry.deps);\n      });\n    }\n\n    if (nextValue !== entry.value) {\n      entry.state += 1;\n      entry.value = nextValue;\n\n      dispatchDeep(entry);\n    }\n\n    entry.checksum = calculateChecksum(entry);\n    contextStack.delete(entry);\n  } catch (e) {\n    entry.checksum = 0;\n\n    contextStack.delete(entry);\n    contextStack.forEach(context => {\n      context.deps.delete(entry);\n      if (context.observed) entry.contexts.delete(context);\n    });\n\n    throw e;\n  }\n\n  return entry.value;\n}\n\nexport function set(target, key, setter, value) {\n  const entry = getEntry(target, key);\n  const newValue = setter(target, value, entry.value);\n\n  if (newValue !== entry.value) {\n    entry.checksum = 0;\n    entry.state += 1;\n    entry.value = newValue;\n\n    dispatchDeep(entry);\n  }\n}\n\nconst gcList = new Set();\nfunction deleteEntry(entry) {\n  if (!gcList.size) {\n    requestAnimationFrame(() => {\n      gcList.forEach(e => {\n        if (!e.contexts || (e.contexts && e.contexts.size === 0)) {\n          const targetMap = entries.get(e.target);\n          targetMap.delete(e.key);\n        }\n      });\n      gcList.clear();\n    });\n  }\n\n  gcList.add(entry);\n}\n\nfunction invalidateEntry(entry, clearValue, deleteValue) {\n  entry.checksum = 0;\n  entry.state += 1;\n\n  dispatchDeep(entry);\n  if (deleteValue) deleteEntry(entry);\n\n  if (clearValue) {\n    entry.value = undefined;\n  }\n}\n\nexport function invalidate(target, key, clearValue, deleteValue) {\n  if (contextStack.size) {\n    throw Error(\n      `Invalidating property in chain of get calls is forbidden: '${key}'`,\n    );\n  }\n\n  const entry = getEntry(target, key);\n  invalidateEntry(entry, clearValue, deleteValue);\n}\n\nexport function invalidateAll(target, clearValue, deleteValue) {\n  if (contextStack.size) {\n    throw Error(\n      \"Invalidating all properties in chain of get calls is forbidden\",\n    );\n  }\n\n  const targetMap = entries.get(target);\n  if (targetMap) {\n    targetMap.forEach(entry => {\n      invalidateEntry(entry, clearValue, deleteValue);\n    });\n  }\n}\n\nexport function observe(target, key, getter, fn) {\n  const entry = getEntry(target, key);\n  entry.observed = true;\n\n  let lastValue;\n  const unsubscribe = emitter.subscribe(entry, () => {\n    const value = get(target, key, getter);\n    if (value !== lastValue) {\n      fn(target, value, lastValue);\n      lastValue = value;\n    }\n  });\n\n  if (entry.deps) {\n    entry.deps.forEach(depEntry => {\n      /* istanbul ignore else */\n      if (!depEntry.contexts) depEntry.contexts = new Set();\n      depEntry.contexts.add(entry);\n    });\n  }\n\n  return function unobserve() {\n    unsubscribe();\n    entry.observed = false;\n    if (entry.deps && entry.deps.size) {\n      entry.deps.forEach(depEntry => {\n        /* istanbul ignore else */\n        if (depEntry.contexts) depEntry.contexts.delete(entry);\n      });\n    }\n  };\n}\n","import property from \"./property.js\";\nimport render from \"./render.js\";\n\nimport * as cache from \"./cache.js\";\nimport { pascalToDash, deferred } from \"./utils.js\";\n\n/* istanbul ignore next */\ntry { process.env.NODE_ENV } catch(e) { var process = { env: { NODE_ENV: 'production' } }; } // eslint-disable-line\n\nconst defaultMethod = (host, value) => value;\n\nconst callbacksMap = new WeakMap();\nconst propsMap = new WeakMap();\n\nfunction compile(Hybrid, descriptors) {\n  Hybrid.hybrids = descriptors;\n\n  const callbacks = [];\n  const props = Object.keys(descriptors);\n\n  callbacksMap.set(Hybrid, callbacks);\n  propsMap.set(Hybrid, props);\n\n  props.forEach(key => {\n    const desc = descriptors[key];\n    const type = typeof desc;\n\n    let config;\n\n    if (type === \"function\") {\n      config = key === \"render\" ? render(desc) : { get: desc };\n    } else if (type !== \"object\" || desc === null || Array.isArray(desc)) {\n      config = property(desc);\n    } else {\n      config = {\n        get: desc.get || defaultMethod,\n        set: desc.set || (!desc.get && defaultMethod) || undefined,\n        connect: desc.connect,\n        observe: desc.observe,\n      };\n    }\n\n    Object.defineProperty(Hybrid.prototype, key, {\n      get: function get() {\n        return cache.get(this, key, config.get);\n      },\n      set:\n        config.set &&\n        function set(newValue) {\n          cache.set(this, key, config.set, newValue);\n        },\n      enumerable: true,\n      configurable: process.env.NODE_ENV !== \"production\",\n    });\n\n    if (config.observe) {\n      callbacks.unshift(host =>\n        cache.observe(host, key, config.get, config.observe),\n      );\n    }\n\n    if (config.connect) {\n      callbacks.push(host =>\n        config.connect(host, key, () => {\n          cache.invalidate(host, key);\n        }),\n      );\n    }\n  });\n}\n\nlet update;\n/* istanbul ignore else */\nif (process.env.NODE_ENV !== \"production\") {\n  const walkInShadow = (node, fn) => {\n    fn(node);\n\n    Array.from(node.children).forEach(el => walkInShadow(el, fn));\n\n    if (node.shadowRoot) {\n      Array.from(node.shadowRoot.children).forEach(el => walkInShadow(el, fn));\n    }\n  };\n\n  const updateQueue = new Map();\n  update = (Hybrid, lastHybrids) => {\n    if (!updateQueue.size) {\n      deferred.then(() => {\n        walkInShadow(document.body, node => {\n          if (updateQueue.has(node.constructor)) {\n            const hybrids = updateQueue.get(node.constructor);\n            node.disconnectedCallback();\n\n            Object.keys(node.constructor.hybrids).forEach(key => {\n              cache.invalidate(\n                node,\n                key,\n                node.constructor.hybrids[key] !== hybrids[key],\n              );\n            });\n\n            node.connectedCallback();\n          }\n        });\n        updateQueue.clear();\n      });\n    }\n    updateQueue.set(Hybrid, lastHybrids);\n  };\n}\n\nconst disconnects = new WeakMap();\n\nfunction defineElement(tagName, hybridsOrConstructor) {\n  const type = typeof hybridsOrConstructor;\n  if (type !== \"object\" && type !== \"function\") {\n    throw TypeError(`Second argument must be an object or a function: ${type}`);\n  }\n\n  if (tagName !== null) {\n    const CustomElement = window.customElements.get(tagName);\n\n    if (type === \"function\") {\n      if (CustomElement !== hybridsOrConstructor) {\n        return window.customElements.define(tagName, hybridsOrConstructor);\n      }\n      return CustomElement;\n    }\n\n    if (CustomElement) {\n      if (CustomElement.hybrids === hybridsOrConstructor) {\n        return CustomElement;\n      }\n      if (process.env.NODE_ENV !== \"production\" && CustomElement.hybrids) {\n        Object.keys(CustomElement.hybrids).forEach(key => {\n          delete CustomElement.prototype[key];\n        });\n\n        const lastHybrids = CustomElement.hybrids;\n\n        compile(CustomElement, hybridsOrConstructor);\n        update(CustomElement, lastHybrids);\n\n        return CustomElement;\n      }\n\n      throw Error(`Element '${tagName}' already defined`);\n    }\n  }\n\n  class Hybrid extends HTMLElement {\n    constructor() {\n      super();\n\n      const props = propsMap.get(Hybrid);\n\n      for (let index = 0; index < props.length; index += 1) {\n        const key = props[index];\n        if (Object.prototype.hasOwnProperty.call(this, key)) {\n          const value = this[key];\n          delete this[key];\n          this[key] = value;\n        }\n      }\n    }\n\n    connectedCallback() {\n      const callbacks = callbacksMap.get(Hybrid);\n      const list = [];\n\n      for (let index = 0; index < callbacks.length; index += 1) {\n        const cb = callbacks[index](this);\n        if (cb) list.push(cb);\n      }\n\n      disconnects.set(this, list);\n    }\n\n    disconnectedCallback() {\n      const list = disconnects.get(this);\n      for (let index = 0; index < list.length; index += 1) {\n        list[index]();\n      }\n    }\n  }\n\n  compile(Hybrid, hybridsOrConstructor);\n\n  if (tagName !== null) {\n    Object.defineProperty(Hybrid, \"name\", {\n      get: () => tagName,\n    });\n    customElements.define(tagName, Hybrid);\n  }\n\n  return Hybrid;\n}\n\nfunction defineMap(elements) {\n  return Object.keys(elements).reduce((acc, key) => {\n    const tagName = pascalToDash(key);\n    acc[key] = defineElement(tagName, elements[key]);\n\n    return acc;\n  }, {});\n}\n\nexport default function define(...args) {\n  if (typeof args[0] === \"object\" && args[0] !== null) {\n    return defineMap(args[0]);\n  }\n\n  return defineElement(...args);\n}\n","function walk(node, fn) {\n  let parentElement = node.parentElement || node.parentNode.host;\n\n  while (parentElement) {\n    const hybrids = parentElement.constructor.hybrids;\n\n    if (hybrids && fn(hybrids)) {\n      return parentElement;\n    }\n\n    parentElement =\n      parentElement.parentElement ||\n      (parentElement.parentNode && parentElement.parentNode.host);\n  }\n\n  return parentElement || null;\n}\n\nexport default function parent(hybridsOrFn) {\n  const fn =\n    typeof hybridsOrFn === \"function\"\n      ? hybridsOrFn\n      : hybrids => hybrids === hybridsOrFn;\n  return {\n    get: host => walk(host, fn),\n    connect(host, key, invalidate) {\n      const target = host[key];\n      if (target) {\n        return invalidate;\n      }\n      return false;\n    },\n  };\n}\n","function walk(node, fn, options, items = []) {\n  Array.from(node.children).forEach(child => {\n    const hybrids = child.constructor.hybrids;\n    if (hybrids && fn(hybrids)) {\n      items.push(child);\n      if (options.deep && options.nested) {\n        walk(child, fn, options, items);\n      }\n    } else if (options.deep) {\n      walk(child, fn, options, items);\n    }\n  });\n\n  return items;\n}\n\nexport default function children(\n  hybridsOrFn,\n  options = { deep: false, nested: false },\n) {\n  const fn =\n    typeof hybridsOrFn === \"function\"\n      ? hybridsOrFn\n      : hybrids => hybrids === hybridsOrFn;\n  return {\n    get(host) {\n      return walk(host, fn, options);\n    },\n    connect(host, key, invalidate) {\n      const observer = new MutationObserver(invalidate);\n\n      observer.observe(host, {\n        childList: true,\n        subtree: !!options.deep,\n      });\n\n      return () => {\n        observer.disconnect();\n      };\n    },\n  };\n}\n","/* eslint-disable no-use-before-define */\nimport * as cache from \"./cache.js\";\nimport { storePointer } from \"./utils.js\";\n\n/* istanbul ignore next */\ntry { process.env.NODE_ENV } catch(e) { var process = { env: { NODE_ENV: 'production' } }; } // eslint-disable-line\n\nexport const connect = `__store__connect__${Date.now()}__`;\nconst definitions = new WeakMap();\n\nfunction resolve(config, model, lastModel) {\n  if (lastModel) definitions.set(lastModel, null);\n  definitions.set(model, config);\n\n  return model;\n}\n\nfunction resolveWithInvalidate(config, model, lastModel) {\n  resolve(config, model, lastModel);\n\n  if ((config.external && model) || !lastModel || error(model)) {\n    config.invalidate();\n  }\n\n  return model;\n}\n\nfunction sync(config, id, model, invalidate) {\n  cache.set(\n    config,\n    id,\n    invalidate ? resolveWithInvalidate : resolve,\n    model,\n    true,\n  );\n  return model;\n}\n\nlet currentTimestamp;\nfunction getCurrentTimestamp() {\n  if (!currentTimestamp) {\n    currentTimestamp = Date.now();\n    requestAnimationFrame(() => {\n      currentTimestamp = undefined;\n    });\n  }\n  return currentTimestamp;\n}\n\nconst timestamps = new WeakMap();\n\nfunction getTimestamp(model) {\n  let timestamp = timestamps.get(model);\n\n  if (!timestamp) {\n    timestamp = getCurrentTimestamp();\n    timestamps.set(model, timestamp);\n  }\n\n  return timestamp;\n}\n\nfunction setTimestamp(model) {\n  timestamps.set(model, getCurrentTimestamp());\n  return model;\n}\n\nfunction setupStorage(storage) {\n  if (typeof storage === \"function\") storage = { get: storage };\n\n  const result = { cache: true, ...storage };\n\n  if (result.cache === false || result.cache === 0) {\n    result.validate = cachedModel =>\n      !cachedModel || getTimestamp(cachedModel) === getCurrentTimestamp();\n  } else if (typeof result.cache === \"number\") {\n    result.validate = cachedModel =>\n      !cachedModel ||\n      getTimestamp(cachedModel) + result.cache > getCurrentTimestamp();\n  } else if (result.cache !== true) {\n    throw TypeError(\n      `Storage cache property must be a boolean or number: ${typeof result.cache}`,\n    );\n  }\n\n  if (!result.get && result.list) {\n    result.get = () => {};\n  }\n\n  return Object.freeze(result);\n}\n\nfunction memoryStorage(config) {\n  return {\n    get: config.enumerable ? () => {} : () => config.create({}),\n    set: config.enumerable\n      ? (id, values) => values\n      : (id, values) => (values === null ? { id } : values),\n    list:\n      config.enumerable &&\n      function list(id) {\n        if (id) {\n          throw TypeError(`Memory-based model definition does not support id`);\n        }\n\n        return cache.getEntries(config).reduce((acc, { key, value }) => {\n          if (key === config) return acc;\n          if (value && !error(value)) acc.push(key);\n          return acc;\n        }, []);\n      },\n  };\n}\n\nfunction bootstrap(Model, nested) {\n  if (Array.isArray(Model)) {\n    return setupListModel(Model[0], nested);\n  }\n  return setupModel(Model, nested);\n}\n\nfunction getTypeConstructor(type, key) {\n  switch (type) {\n    case \"string\":\n      return v => (v !== undefined && v !== null ? String(v) : \"\");\n    case \"number\":\n      return Number;\n    case \"boolean\":\n      return Boolean;\n    default:\n      throw TypeError(\n        `The value of the '${key}' must be a string, number or boolean: ${type}`,\n      );\n  }\n}\n\nconst stateSetter = (h, v) => v;\nfunction setModelState(model, state, value = model) {\n  cache.set(model, \"state\", stateSetter, { state, value }, true);\n  return model;\n}\n\nconst stateGetter = (model, v = { state: \"ready\", value: model }) => v;\nfunction getModelState(model) {\n  return cache.get(model, \"state\", stateGetter);\n}\n\n// UUID v4 generator thanks to https://gist.github.com/jed/982883\nfunction uuid(temp) {\n  return temp\n    ? // eslint-disable-next-line no-bitwise, no-mixed-operators\n      (temp ^ ((Math.random() * 16) >> (temp / 4))).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}\n\nconst validationMap = new WeakMap();\n\nfunction resolveKey(Model, key, config) {\n  let defaultValue = config.model[key];\n  let type = typeof config.model[key];\n\n  if (defaultValue instanceof String || defaultValue instanceof Number) {\n    const check = validationMap.get(defaultValue);\n    if (!check) {\n      throw TypeError(\n        stringifyModel(\n          Model,\n          `You must use primitive ${typeof defaultValue.valueOf()} value for '${key}' property of the provided model definition`,\n        ),\n      );\n    }\n\n    defaultValue = defaultValue.valueOf();\n    type = typeof defaultValue;\n\n    config.checks.set(key, check);\n  }\n\n  return { defaultValue, type };\n}\n\nfunction stringifyModel(Model, msg) {\n  return `${msg}\\n\\nModel = ${JSON.stringify(\n    Model,\n    (key, value) => {\n      if (key === connect) return undefined;\n      return value;\n    },\n    2,\n  )}\\n`;\n}\n\nconst _ = (h, v) => v;\n\nconst resolvedPromise = Promise.resolve();\nconst configs = new WeakMap();\nfunction setupModel(Model, nested) {\n  if (typeof Model !== \"object\" || Model === null) {\n    throw TypeError(`Model definition must be an object: ${typeof Model}`);\n  }\n\n  let config = configs.get(Model);\n\n  if (config && !config.enumerable) {\n    if (nested && !config.nested) {\n      throw TypeError(\n        stringifyModel(\n          Model,\n          \"Provided model definition for nested object already used as a root definition\",\n        ),\n      );\n    }\n\n    if (!nested && config.nested) {\n      throw TypeError(\n        stringifyModel(\n          Model,\n          \"Nested model definition cannot be used outside of the parent definition\",\n        ),\n      );\n    }\n  }\n\n  if (!config) {\n    const storage = Model[connect];\n    if (typeof storage === \"object\") Object.freeze(storage);\n\n    let invalidatePromise;\n    const placeholder = {};\n    const enumerable = hasOwnProperty.call(Model, \"id\");\n    const checks = new Map();\n\n    config = {\n      model: Model,\n      external: !!storage,\n      enumerable,\n      nested: !enumerable && nested,\n      placeholder: id => {\n        const model = Object.create(placeholder);\n        definitions.set(model, config);\n\n        if (enumerable) model.id = id;\n\n        return Object.freeze(model);\n      },\n      isInstance: model => Object.getPrototypeOf(model) !== placeholder,\n      invalidate: () => {\n        if (!invalidatePromise) {\n          invalidatePromise = resolvedPromise.then(() => {\n            cache.invalidate(config, config, true);\n            invalidatePromise = null;\n          });\n        }\n      },\n      checks,\n    };\n\n    config.storage = setupStorage(storage || memoryStorage(config, Model));\n\n    const transform = Object.keys(Object.freeze(Model))\n      .filter(key => key !== connect)\n      .map(key => {\n        if (key !== \"id\") {\n          Object.defineProperty(placeholder, key, {\n            get() {\n              throw Error(\n                `Model instance in ${\n                  getModelState(this).state\n                } state - use store.pending(), store.error(), or store.ready() guards`,\n              );\n            },\n            enumerable: true,\n          });\n        }\n\n        if (key === \"id\") {\n          if (Model[key] !== true) {\n            throw TypeError(\n              \"The 'id' property in model definition must be set to 'true' or not be defined\",\n            );\n          }\n          return (model, data, lastModel) => {\n            let id;\n            if (lastModel) {\n              id = lastModel.id;\n            } else if (hasOwnProperty.call(data, \"id\")) {\n              id = String(data.id);\n            } else {\n              id = uuid();\n            }\n\n            Object.defineProperty(model, \"id\", { value: id, enumerable: true });\n          };\n        }\n\n        const { defaultValue, type } = resolveKey(Model, key, config);\n\n        switch (type) {\n          case \"function\":\n            return model => {\n              Object.defineProperty(model, key, {\n                get() {\n                  return cache.get(this, key, defaultValue);\n                },\n              });\n            };\n          case \"object\": {\n            if (defaultValue === null) {\n              throw TypeError(\n                `The value for the '${key}' must be an object instance: ${defaultValue}`,\n              );\n            }\n\n            const isArray = Array.isArray(defaultValue);\n\n            if (isArray) {\n              const nestedType = typeof defaultValue[0];\n\n              if (nestedType !== \"object\") {\n                const Constructor = getTypeConstructor(nestedType, key);\n                const defaultArray = Object.freeze(\n                  defaultValue.map(Constructor),\n                );\n                return (model, data, lastModel) => {\n                  if (hasOwnProperty.call(data, key)) {\n                    if (!Array.isArray(data[key])) {\n                      throw TypeError(\n                        `The value for '${key}' property must be an array: ${typeof data[\n                          key\n                        ]}`,\n                      );\n                    }\n                    model[key] = Object.freeze(data[key].map(Constructor));\n                  } else if (lastModel && hasOwnProperty.call(lastModel, key)) {\n                    model[key] = lastModel[key];\n                  } else {\n                    model[key] = defaultArray;\n                  }\n                };\n              }\n\n              const localConfig = bootstrap(defaultValue, true);\n\n              if (localConfig.enumerable && defaultValue[1]) {\n                const nestedOptions = defaultValue[1];\n                if (typeof nestedOptions !== \"object\") {\n                  throw TypeError(\n                    `Options for '${key}' array property must be an object instance: ${typeof nestedOptions}`,\n                  );\n                }\n                if (nestedOptions.loose) {\n                  config.contexts = config.contexts || new Set();\n                  config.contexts.add(bootstrap(defaultValue[0]));\n                }\n              }\n              return (model, data, lastModel) => {\n                if (hasOwnProperty.call(data, key)) {\n                  if (!Array.isArray(data[key])) {\n                    throw TypeError(\n                      `The value for '${key}' property must be an array: ${typeof data[\n                        key\n                      ]}`,\n                    );\n                  }\n                  model[key] = localConfig.create(data[key]);\n                } else {\n                  model[key] =\n                    (lastModel && lastModel[key]) ||\n                    (!localConfig.enumerable &&\n                      localConfig.create(defaultValue)) ||\n                    [];\n                }\n              };\n            }\n\n            const nestedConfig = bootstrap(defaultValue, true);\n            if (nestedConfig.enumerable || nestedConfig.external) {\n              return (model, data, lastModel) => {\n                let resultModel;\n\n                if (hasOwnProperty.call(data, key)) {\n                  const nestedData = data[key];\n\n                  if (typeof nestedData !== \"object\" || nestedData === null) {\n                    if (nestedData !== undefined && nestedData !== null) {\n                      resultModel = { id: nestedData };\n                    }\n                  } else {\n                    const dataConfig = definitions.get(nestedData);\n                    if (dataConfig) {\n                      if (dataConfig.model !== defaultValue) {\n                        throw TypeError(\n                          \"Model instance must match the definition\",\n                        );\n                      }\n                      resultModel = nestedData;\n                    } else {\n                      resultModel = nestedConfig.create(nestedData);\n                      sync(nestedConfig, resultModel.id, resultModel);\n                    }\n                  }\n                } else {\n                  resultModel = lastModel && lastModel[key];\n                }\n\n                if (resultModel) {\n                  const id = resultModel.id;\n                  Object.defineProperty(model, key, {\n                    get() {\n                      return cache.get(\n                        this,\n                        key,\n                        pending(this) ? _ : () => get(defaultValue, id),\n                      );\n                    },\n                    enumerable: true,\n                  });\n                } else {\n                  model[key] = undefined;\n                }\n              };\n            }\n\n            return (model, data, lastModel) => {\n              if (hasOwnProperty.call(data, key)) {\n                model[key] = nestedConfig.create(\n                  data[key],\n                  lastModel && lastModel[key],\n                );\n              } else {\n                model[key] = lastModel\n                  ? lastModel[key]\n                  : nestedConfig.create({});\n              }\n            };\n          }\n          // eslint-disable-next-line no-fallthrough\n          default: {\n            const Constructor = getTypeConstructor(type, key);\n            return (model, data, lastModel) => {\n              if (hasOwnProperty.call(data, key)) {\n                model[key] = Constructor(data[key]);\n              } else if (lastModel && hasOwnProperty.call(lastModel, key)) {\n                model[key] = lastModel[key];\n              } else {\n                model[key] = defaultValue;\n              }\n            };\n          }\n        }\n      });\n\n    config.create = function create(data, lastModel) {\n      if (data === null) return null;\n\n      if (typeof data !== \"object\") {\n        throw TypeError(`Model values must be an object instance: ${data}`);\n      }\n\n      const model = transform.reduce((acc, fn) => {\n        fn(acc, data, lastModel);\n        return acc;\n      }, {});\n\n      definitions.set(model, config);\n      storePointer.set(model, store);\n\n      return Object.freeze(model);\n    };\n\n    Object.freeze(placeholder);\n\n    configs.set(Model, Object.freeze(config));\n  }\n\n  return config;\n}\n\nconst listPlaceholderPrototype = Object.getOwnPropertyNames(\n  Array.prototype,\n).reduce((acc, key) => {\n  if (key === \"length\" || key === \"constructor\") return acc;\n\n  Object.defineProperty(acc, key, {\n    get() {\n      throw Error(\n        `Model list instance in ${\n          getModelState(this).state\n        } state - use store.pending(), store.error(), or store.ready() guards`,\n      );\n    },\n  });\n  return acc;\n}, []);\n\nconst lists = new WeakMap();\nfunction setupListModel(Model, nested) {\n  let config = lists.get(Model);\n\n  if (config && !config.enumerable) {\n    if (!nested && config.nested) {\n      throw TypeError(\n        stringifyModel(\n          Model,\n          \"Nested model definition cannot be used outside of the parent definition\",\n        ),\n      );\n    }\n  }\n\n  if (!config) {\n    const modelConfig = setupModel(Model);\n\n    const contexts = new Set();\n    contexts.add(modelConfig);\n\n    if (!nested) {\n      if (!modelConfig.enumerable) {\n        throw TypeError(\n          stringifyModel(\n            Model,\n            \"Provided model definition does not support listing (it must be enumerable - set `id` property to `true`)\",\n          ),\n        );\n      }\n      if (!modelConfig.storage.list) {\n        throw TypeError(\n          stringifyModel(\n            Model,\n            \"Provided model definition storage does not support `list` action\",\n          ),\n        );\n      }\n    }\n\n    config = {\n      list: true,\n      nested: !modelConfig.enumerable && nested,\n      model: Model,\n      contexts,\n      enumerable: modelConfig.enumerable,\n      storage: setupStorage({\n        cache: modelConfig.storage.cache,\n        get:\n          !nested &&\n          (id => {\n            return modelConfig.storage.list(id);\n          }),\n      }),\n      placeholder: () => {\n        const model = Object.create(listPlaceholderPrototype);\n        definitions.set(model, config);\n\n        return Object.freeze(model);\n      },\n      isInstance: model =>\n        Object.getPrototypeOf(model) !== listPlaceholderPrototype,\n      create(items) {\n        const result = items.reduce((acc, data) => {\n          let id = data;\n          if (typeof data === \"object\" && data !== null) {\n            id = data.id;\n            const dataConfig = definitions.get(data);\n            let model = data;\n            if (dataConfig) {\n              if (dataConfig.model !== Model) {\n                throw TypeError(\"Model instance must match the definition\");\n              }\n            } else {\n              model = modelConfig.create(data);\n              if (modelConfig.enumerable) {\n                id = model.id;\n                sync(modelConfig, id, model);\n              }\n            }\n            if (!modelConfig.enumerable) {\n              acc.push(model);\n            }\n          } else if (!modelConfig.enumerable) {\n            throw TypeError(`Model instance must be an object: ${typeof data}`);\n          }\n          if (modelConfig.enumerable) {\n            const key = acc.length;\n            Object.defineProperty(acc, key, {\n              get() {\n                return cache.get(\n                  this,\n                  key,\n                  pending(this) ? _ : () => get(Model, id),\n                );\n              },\n              enumerable: true,\n            });\n          }\n          return acc;\n        }, []);\n\n        definitions.set(result, config);\n        storePointer.set(result, store);\n\n        return Object.freeze(result);\n      },\n    };\n\n    lists.set(Model, Object.freeze(config));\n  }\n\n  return config;\n}\n\nfunction resolveTimestamp(h, v) {\n  return v || getCurrentTimestamp();\n}\n\nfunction stringifyId(id) {\n  switch (typeof id) {\n    case \"object\":\n      return JSON.stringify(\n        Object.keys(id)\n          .sort()\n          .reduce((acc, key) => {\n            if (typeof id[key] === \"object\" && id[key] !== null) {\n              throw TypeError(\n                `You must use primitive value for '${key}' key: ${typeof id[\n                  key\n                ]}`,\n              );\n            }\n            acc[key] = id[key];\n            return acc;\n          }, {}),\n      );\n    case \"undefined\":\n      return undefined;\n    default:\n      return String(id);\n  }\n}\n\nfunction mapError(model, err, suppressLog) {\n  /* istanbul ignore next */\n  if (process.env.NODE_ENV !== \"production\" && suppressLog !== false) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n\n  return setModelState(model, \"error\", err);\n}\n\nfunction get(Model, id) {\n  const config = bootstrap(Model);\n  let stringId;\n\n  if (!config.storage.get) {\n    throw TypeError(\n      stringifyModel(\n        Model,\n        \"Provided model definition does not support 'get' method\",\n      ),\n    );\n  }\n\n  if (config.enumerable) {\n    stringId = stringifyId(id);\n\n    if (!config.list && !stringId) {\n      throw TypeError(\n        stringifyModel(\n          Model,\n          `Provided model definition requires non-empty id: \"${stringId}\"`,\n        ),\n      );\n    }\n  } else if (id !== undefined) {\n    throw TypeError(\n      stringifyModel(Model, \"Provided model definition does not support id\"),\n    );\n  }\n\n  return cache.get(\n    config,\n    stringId,\n    (h, cachedModel) => {\n      if (cachedModel && pending(cachedModel)) return cachedModel;\n\n      let validContexts = true;\n      if (config.contexts) {\n        config.contexts.forEach(context => {\n          if (\n            cache.get(context, context, resolveTimestamp) ===\n            getCurrentTimestamp()\n          ) {\n            validContexts = false;\n          }\n        });\n      }\n\n      if (\n        validContexts &&\n        cachedModel &&\n        (config.storage.cache === true || config.storage.validate(cachedModel))\n      ) {\n        return cachedModel;\n      }\n\n      try {\n        let result = config.storage.get(id);\n\n        if (typeof result !== \"object\" || result === null) {\n          throw Error(\n            stringifyModel(\n              Model,\n              `Model instance ${\n                stringId !== undefined ? `with '${stringId}' id ` : \"\"\n              }does not exist`,\n            ),\n          );\n        }\n\n        if (result instanceof Promise) {\n          result = result\n            .then(data => {\n              if (typeof data !== \"object\" || data === null) {\n                throw Error(\n                  stringifyModel(\n                    Model,\n                    `Model instance ${\n                      stringId !== undefined ? `with '${stringId}' id ` : \"\"\n                    }does not exist`,\n                  ),\n                );\n              }\n\n              return sync(\n                config,\n                stringId,\n                config.create(\n                  !config.list && stringId ? { ...data, id: stringId } : data,\n                ),\n              );\n            })\n            .catch(e => {\n              return sync(\n                config,\n                stringId,\n                mapError(cachedModel || config.placeholder(stringId), e),\n              );\n            });\n\n          return setModelState(\n            cachedModel || config.placeholder(stringId),\n            \"pending\",\n            result,\n          );\n        }\n\n        if (cachedModel) definitions.set(cachedModel, null);\n        return setTimestamp(\n          config.create(\n            !config.list && stringId ? { ...result, id: stringId } : result,\n          ),\n        );\n      } catch (e) {\n        return setTimestamp(\n          mapError(cachedModel || config.placeholder(stringId), e),\n        );\n      }\n    },\n    config.storage.validate,\n  );\n}\n\nconst draftMap = new WeakMap();\n\nfunction getValidationError(errors) {\n  const keys = Object.keys(errors);\n  const e = Error(\n    `Model validation failed (${keys.join(\n      \", \",\n    )}) - read the details from 'errors' property`,\n  );\n\n  e.errors = errors;\n\n  return e;\n}\n\nfunction set(model, values = {}) {\n  let config = definitions.get(model);\n  const isInstance = !!config;\n\n  if (config === null) {\n    throw Error(\n      \"Provided model instance has expired. Haven't you used stale value?\",\n    );\n  }\n\n  if (!config) config = bootstrap(model);\n\n  if (config.nested) {\n    throw stringifyModel(\n      config.model,\n      TypeError(\n        \"Setting provided nested model instance is not supported, use the root model instance\",\n      ),\n    );\n  }\n\n  if (config.list) {\n    throw TypeError(\"Listing model definition does not support 'set' method\");\n  }\n\n  if (!config.storage.set) {\n    throw stringifyModel(\n      config.model,\n      TypeError(\n        \"Provided model definition storage does not support 'set' method\",\n      ),\n    );\n  }\n\n  if (isInstance && pending(model)) {\n    throw Error(\"Provided model instance is in pending state\");\n  }\n\n  let id;\n  const setState = (state, value) => {\n    if (isInstance) {\n      setModelState(model, state, value);\n    } else {\n      const entry = cache.getEntry(config, id);\n      if (entry.value) {\n        setModelState(entry.value, state, value);\n      }\n    }\n  };\n\n  try {\n    if (\n      config.enumerable &&\n      !isInstance &&\n      (!values || typeof values !== \"object\")\n    ) {\n      throw TypeError(`Values must be an object instance: ${values}`);\n    }\n\n    if (values && hasOwnProperty.call(values, \"id\")) {\n      throw TypeError(`Values must not contain 'id' property: ${values.id}`);\n    }\n\n    const localModel = config.create(values, isInstance ? model : undefined);\n    const keys = values ? Object.keys(values) : [];\n    const isDraft = draftMap.get(config);\n    const errors = {};\n    const lastError = isInstance && isDraft && error(model);\n\n    let hasErrors = false;\n\n    if (localModel) {\n      config.checks.forEach((fn, key) => {\n        if (keys.indexOf(key) === -1) {\n          if (lastError && lastError.errors && lastError.errors[key]) {\n            hasErrors = true;\n            errors[key] = lastError.errors[key];\n          }\n\n          // eslint-disable-next-line eqeqeq\n          if (isDraft && localModel[key] == config.model[key]) {\n            return;\n          }\n        }\n\n        let checkResult;\n        try {\n          checkResult = fn(localModel[key], key, localModel);\n        } catch (e) {\n          checkResult = e;\n        }\n\n        if (checkResult !== true && checkResult !== undefined) {\n          hasErrors = true;\n          errors[key] = checkResult || true;\n        }\n      });\n\n      if (hasErrors && !isDraft) {\n        throw getValidationError(errors);\n      }\n    }\n\n    id = localModel ? localModel.id : model.id;\n\n    const result = Promise.resolve(\n      config.storage.set(isInstance ? id : undefined, localModel, keys),\n    )\n      .then(data => {\n        const resultModel =\n          data === localModel ? localModel : config.create(data);\n\n        if (isInstance && resultModel && id !== resultModel.id) {\n          throw TypeError(\n            `Local and storage data must have the same id: '${id}', '${resultModel.id}'`,\n          );\n        }\n\n        const resultId = resultModel ? resultModel.id : id;\n\n        if (hasErrors && isDraft) {\n          setModelState(resultModel, \"error\", getValidationError(errors));\n        }\n\n        return sync(\n          config,\n          resultId,\n          resultModel ||\n            mapError(\n              config.placeholder(resultId),\n              Error(\n                `Model instance ${\n                  id !== undefined ? `with '${id}' id` : \"\"\n                } does not exist`,\n              ),\n              false,\n            ),\n          true,\n        );\n      })\n      .catch(err => {\n        err = err !== undefined ? err : Error(\"Undefined error\");\n        setState(\"error\", err);\n        throw err;\n      });\n\n    setState(\"pending\", result);\n\n    return result;\n  } catch (e) {\n    setState(\"error\", e);\n    return Promise.reject(e);\n  }\n}\n\nfunction clear(model, clearValue = true) {\n  if (typeof model !== \"object\" || model === null) {\n    throw TypeError(\n      `The first argument must be a model instance or a model definition: ${model}`,\n    );\n  }\n\n  const config = definitions.get(model);\n\n  if (config === null) {\n    throw Error(\n      \"Provided model instance has expired. Haven't you used stale value from the outer scope?\",\n    );\n  }\n\n  if (config) {\n    cache.invalidate(config, model.id, clearValue, true);\n  } else {\n    if (!configs.get(model) && !lists.get(model[0])) {\n      throw Error(\n        \"Model definition must be used before - passed argument is probably not a model definition\",\n      );\n    }\n    cache.invalidateAll(bootstrap(model), clearValue, true);\n  }\n}\n\nfunction pending(model) {\n  if (model === null || typeof model !== \"object\") return false;\n  const { state, value } = getModelState(model);\n  return state === \"pending\" && value;\n}\n\nfunction error(model, property) {\n  if (model === null || typeof model !== \"object\") return false;\n  const { state, value } = getModelState(model);\n  const result = state === \"error\" && value;\n\n  if (result && property !== undefined) {\n    return result.errors && result.errors[property];\n  }\n\n  return result;\n}\n\nfunction ready(model) {\n  if (model === null || typeof model !== \"object\") return false;\n  const config = definitions.get(model);\n  return !!(config && config.isInstance(model));\n}\n\nfunction mapValueWithState(lastValue, nextValue) {\n  const result = Object.freeze(\n    Object.keys(lastValue).reduce((acc, key) => {\n      Object.defineProperty(acc, key, {\n        get: () => lastValue[key],\n        enumerable: true,\n      });\n      return acc;\n    }, Object.create(lastValue)),\n  );\n\n  definitions.set(result, definitions.get(lastValue));\n\n  const { state, value } = getModelState(nextValue);\n  return setModelState(result, state, value);\n}\n\nfunction getValuesFromModel(model) {\n  const values = { ...model };\n  delete values.id;\n  return values;\n}\n\nfunction submit(draft) {\n  const config = definitions.get(draft);\n  if (!config || !draftMap.has(config)) {\n    throw TypeError(`Provided model instance is not a draft: ${draft}`);\n  }\n\n  if (pending(draft)) {\n    throw Error(\"Model draft in pending state\");\n  }\n\n  const options = draftMap.get(config);\n  let result;\n\n  if (!options.id) {\n    result = store.set(options.model, getValuesFromModel(draft));\n  } else {\n    const model = store.get(options.model, draft.id);\n    result = Promise.resolve(pending(model) || model).then(resolvedModel =>\n      store.set(resolvedModel, getValuesFromModel(draft)),\n    );\n  }\n\n  result = result\n    .then(resultModel => {\n      setModelState(draft, \"ready\");\n      return store\n        .set(draft, getValuesFromModel(resultModel))\n        .then(() => resultModel);\n    })\n    .catch(e => {\n      setModelState(draft, \"error\", e);\n      return Promise.reject(e);\n    });\n\n  setModelState(draft, \"pending\", result);\n\n  return result;\n}\n\nfunction required(value, key) {\n  return !!value || `${key} is required`;\n}\n\nfunction valueWithValidation(\n  defaultValue,\n  validate = required,\n  errorMessage = \"\",\n) {\n  switch (typeof defaultValue) {\n    case \"string\":\n      // eslint-disable-next-line no-new-wrappers\n      defaultValue = new String(defaultValue);\n      break;\n    case \"number\":\n      // eslint-disable-next-line no-new-wrappers\n      defaultValue = new Number(defaultValue);\n      break;\n    default:\n      throw TypeError(\n        `Default value must be a string or a number: ${typeof defaultValue}`,\n      );\n  }\n\n  let fn;\n  if (validate instanceof RegExp) {\n    fn = value => validate.test(value) || errorMessage;\n  } else if (typeof validate === \"function\") {\n    fn = (...args) => {\n      const result = validate(...args);\n      return result !== true && result !== undefined\n        ? result || errorMessage\n        : result;\n    };\n  } else {\n    throw TypeError(\n      `The second argument must be a RegExp instance or a function: ${typeof validate}`,\n    );\n  }\n\n  validationMap.set(defaultValue, fn);\n  return defaultValue;\n}\n\nfunction store(Model, options = {}) {\n  const config = bootstrap(Model);\n\n  if (typeof options !== \"object\") {\n    options = { id: options };\n  }\n\n  if (options.id !== undefined && typeof options.id !== \"function\") {\n    const id = options.id;\n    options.id = host => host[id];\n  }\n\n  if (options.draft) {\n    if (config.list) {\n      throw TypeError(\n        \"Draft mode is not supported for listing model definition\",\n      );\n    }\n\n    Model = {\n      ...Model,\n      [store.connect]: {\n        get(id) {\n          const model = store.get(config.model, id);\n          return ready(model) ? model : pending(model);\n        },\n        set(id, values) {\n          return values === null ? { id } : values;\n        },\n      },\n    };\n\n    options.draft = bootstrap(Model);\n    draftMap.set(options.draft, { model: config.model, id: options.id });\n  }\n\n  const createMode =\n    options.draft &&\n    ((config.enumerable && !options.id) ||\n      (!config.enumerable && config.external));\n\n  const desc = {\n    get: (host, lastValue) => {\n      if (createMode && !lastValue) {\n        const nextValue = options.draft.create({});\n        sync(options.draft, nextValue.id, nextValue);\n        return store.get(Model, nextValue.id);\n      }\n\n      const id =\n        options.draft && lastValue\n          ? lastValue.id\n          : options.id && options.id(host);\n\n      const nextValue = store.get(Model, id);\n\n      if (lastValue && nextValue !== lastValue && !ready(nextValue)) {\n        return mapValueWithState(lastValue, nextValue);\n      }\n\n      return nextValue;\n    },\n    set: config.list\n      ? undefined\n      : (host, values, lastValue) => {\n          if (!lastValue || !ready(lastValue)) lastValue = desc.get(host);\n\n          store\n            .set(lastValue, values)\n            .catch(/* istanbul ignore next */ () => {});\n\n          return lastValue;\n        },\n    connect: options.draft ? () => () => clear(Model, false) : undefined,\n  };\n\n  return desc;\n}\n\nexport default Object.assign(store, {\n  // storage\n  connect,\n\n  // actions\n  get,\n  set,\n  clear,\n\n  // guards\n  pending,\n  error,\n  ready,\n\n  // helpers\n  submit,\n  value: valueWithValidation,\n});\n","const map = new WeakMap();\nexport const dataMap = {\n  get(key, defaultValue) {\n    const value = map.get(key);\n    if (value) return value;\n\n    if (defaultValue) {\n      map.set(key, defaultValue);\n    }\n\n    return defaultValue;\n  },\n  set(key, value) {\n    map.set(key, value);\n    return value;\n  },\n};\n\nexport function getTemplateEnd(node) {\n  let data;\n  // eslint-disable-next-line no-cond-assign\n  while (node && (data = dataMap.get(node)) && data.endNode) {\n    node = data.endNode;\n  }\n\n  return node;\n}\n\nexport function removeTemplate(target) {\n  if (target.nodeType !== Node.TEXT_NODE) {\n    let child = target.childNodes[0];\n    while (child) {\n      target.removeChild(child);\n      child = target.childNodes[0];\n    }\n  } else {\n    const data = dataMap.get(target);\n\n    if (data.startNode) {\n      const endNode = getTemplateEnd(data.endNode);\n\n      let node = data.startNode;\n      const lastNextSibling = endNode.nextSibling;\n\n      while (node) {\n        const nextSibling = node.nextSibling;\n        node.parentNode.removeChild(node);\n        node = nextSibling !== lastNextSibling && nextSibling;\n      }\n    }\n  }\n}\n","import { dataMap, removeTemplate, getTemplateEnd } from \"../utils.js\";\n\nexport const arrayMap = new WeakMap();\n\nfunction movePlaceholder(target, previousSibling) {\n  const data = dataMap.get(target);\n  const startNode = data.startNode;\n  const endNode = getTemplateEnd(data.endNode);\n\n  previousSibling.parentNode.insertBefore(target, previousSibling.nextSibling);\n\n  let prevNode = target;\n  let node = startNode;\n  while (node) {\n    const nextNode = node.nextSibling;\n    prevNode.parentNode.insertBefore(node, prevNode.nextSibling);\n    prevNode = node;\n    node = nextNode !== endNode.nextSibling && nextNode;\n  }\n}\n\nexport default function resolveArray(host, target, value, resolveValue) {\n  let lastEntries = arrayMap.get(target);\n  const entries = value.map((item, index) => ({\n    id: Object.prototype.hasOwnProperty.call(item, \"id\") ? item.id : index,\n    value: item,\n    placeholder: null,\n    available: true,\n  }));\n\n  arrayMap.set(target, entries);\n\n  if (lastEntries) {\n    const ids = new Set();\n    entries.forEach(entry => ids.add(entry.id));\n\n    lastEntries = lastEntries.filter(entry => {\n      if (!ids.has(entry.id)) {\n        removeTemplate(entry.placeholder);\n        entry.placeholder.parentNode.removeChild(entry.placeholder);\n        return false;\n      }\n\n      return true;\n    });\n  }\n\n  let previousSibling = target;\n  const lastIndex = value.length - 1;\n  const data = dataMap.get(target);\n\n  for (let index = 0; index < entries.length; index += 1) {\n    const entry = entries[index];\n    let matchedEntry;\n    if (lastEntries) {\n      for (let i = 0; i < lastEntries.length; i += 1) {\n        if (lastEntries[i].available && lastEntries[i].id === entry.id) {\n          matchedEntry = lastEntries[i];\n          break;\n        }\n      }\n    }\n\n    if (matchedEntry) {\n      matchedEntry.available = false;\n      entry.placeholder = matchedEntry.placeholder;\n\n      if (entry.placeholder.previousSibling !== previousSibling) {\n        movePlaceholder(entry.placeholder, previousSibling);\n      }\n      if (matchedEntry.value !== entry.value) {\n        resolveValue(host, entry.placeholder, entry.value);\n      }\n    } else {\n      entry.placeholder = document.createTextNode(\"\");\n      previousSibling.parentNode.insertBefore(\n        entry.placeholder,\n        previousSibling.nextSibling,\n      );\n      resolveValue(host, entry.placeholder, entry.value);\n    }\n\n    previousSibling = getTemplateEnd(\n      dataMap.get(entry.placeholder).endNode || entry.placeholder,\n    );\n\n    if (index === 0) data.startNode = entry.placeholder;\n    if (index === lastIndex) data.endNode = previousSibling;\n  }\n\n  if (lastEntries) {\n    lastEntries.forEach(entry => {\n      if (entry.available) {\n        removeTemplate(entry.placeholder);\n        entry.placeholder.parentNode.removeChild(entry.placeholder);\n      }\n    });\n  }\n}\n","import { dataMap, removeTemplate } from \"../utils.js\";\nimport resolveArray, { arrayMap } from \"./array.js\";\n\nexport default function resolveValue(host, target, value) {\n  const type = Array.isArray(value) ? \"array\" : typeof value;\n  let data = dataMap.get(target, {});\n\n  if (data.type !== type) {\n    removeTemplate(target);\n    if (type === \"array\") arrayMap.delete(target);\n\n    data = dataMap.set(target, { type });\n\n    if (target.textContent !== \"\") {\n      target.textContent = \"\";\n    }\n  }\n\n  switch (type) {\n    case \"function\":\n      value(host, target);\n      break;\n    case \"array\":\n      resolveArray(host, target, value, resolveValue);\n      break;\n    default:\n      target.textContent = type === \"number\" || value ? value : \"\";\n  }\n}\n","const targets = new WeakMap();\n\nexport default function resolveEventListener(eventType) {\n  return (host, target, value, lastValue) => {\n    if (lastValue) {\n      const eventMap = targets.get(target);\n      if (eventMap) {\n        target.removeEventListener(\n          eventType,\n          eventMap.get(lastValue),\n          lastValue.options !== undefined ? lastValue.options : false,\n        );\n      }\n    }\n\n    if (value) {\n      if (typeof value !== \"function\") {\n        throw Error(`Event listener must be a function: ${typeof value}`);\n      }\n\n      let eventMap = targets.get(target);\n      if (!eventMap) {\n        eventMap = new WeakMap();\n        targets.set(target, eventMap);\n      }\n\n      const callback = value.bind(null, host);\n      eventMap.set(value, callback);\n\n      target.addEventListener(\n        eventType,\n        callback,\n        value.options !== undefined ? value.options : false,\n      );\n    }\n  };\n}\n","function normalizeValue(value, set = new Set()) {\n  if (Array.isArray(value)) {\n    value.forEach(className => set.add(className));\n  } else if (value !== null && typeof value === \"object\") {\n    Object.keys(value).forEach(key => value[key] && set.add(key));\n  } else {\n    set.add(value);\n  }\n\n  return set;\n}\n\nconst classMap = new WeakMap();\n\nexport default function resolveClassList(host, target, value) {\n  const previousList = classMap.get(target) || new Set();\n  const list = normalizeValue(value);\n\n  classMap.set(target, list);\n\n  list.forEach(className => {\n    target.classList.add(className);\n    previousList.delete(className);\n  });\n\n  previousList.forEach(className => {\n    target.classList.remove(className);\n  });\n}\n","import { camelToDash, stringifyElement } from \"../../utils.js\";\n\nconst styleMap = new WeakMap();\n\nexport default function resolveStyle(host, target, value) {\n  if (value === null || typeof value !== \"object\") {\n    throw TypeError(\n      `Style value must be an object in ${stringifyElement(target)}:`,\n      value,\n    );\n  }\n\n  const previousMap = styleMap.get(target) || new Map();\n\n  const nextMap = Object.keys(value).reduce((map, key) => {\n    const dashKey = camelToDash(key);\n    const styleValue = value[key];\n\n    if (!styleValue && styleValue !== 0) {\n      target.style.removeProperty(dashKey);\n    } else {\n      target.style.setProperty(dashKey, styleValue);\n    }\n\n    map.set(dashKey, styleValue);\n    previousMap.delete(dashKey);\n\n    return map;\n  }, new Map());\n\n  previousMap.forEach((styleValue, key) => {\n    target.style[key] = \"\";\n  });\n\n  styleMap.set(target, nextMap);\n}\n","import resolveEventListener from \"./event.js\";\nimport resolveClassList from \"./class.js\";\nimport resolveStyleList from \"./style.js\";\n\nexport default function resolveProperty(attrName, propertyName, isSVG) {\n  if (propertyName.substr(0, 2) === \"on\") {\n    const eventType = propertyName.substr(2);\n    return resolveEventListener(eventType);\n  }\n\n  switch (attrName) {\n    case \"class\":\n      return resolveClassList;\n    case \"style\":\n      return resolveStyleList;\n    default:\n      return (host, target, value) => {\n        if (\n          !isSVG &&\n          !(target instanceof SVGElement) &&\n          propertyName in target\n        ) {\n          if (target[propertyName] !== value) {\n            target[propertyName] = value;\n          }\n        } else if (value === false || value === undefined || value === null) {\n          target.removeAttribute(attrName);\n        } else {\n          const attrValue = value === true ? \"\" : String(value);\n          target.setAttribute(attrName, attrValue);\n        }\n      };\n  }\n}\n","import { stringifyElement, shadyCSS, IS_IE } from \"../utils.js\";\nimport { dataMap, removeTemplate } from \"./utils.js\";\n\nimport resolveValue from \"./resolvers/value.js\";\nimport resolveProperty from \"./resolvers/property.js\";\n\n/* istanbul ignore next */\ntry { process.env.NODE_ENV } catch(e) { var process = { env: { NODE_ENV: 'production' } }; } // eslint-disable-line\n\nconst TIMESTAMP = Date.now();\n\nexport const getPlaceholder = (id = 0) => `{{h-${TIMESTAMP}-${id}}}`;\n\nconst PLACEHOLDER_REGEXP_TEXT = getPlaceholder(\"(\\\\d+)\");\nconst PLACEHOLDER_REGEXP_EQUAL = new RegExp(`^${PLACEHOLDER_REGEXP_TEXT}$`);\nconst PLACEHOLDER_REGEXP_ALL = new RegExp(PLACEHOLDER_REGEXP_TEXT, \"g\");\n\nconst ATTR_PREFIX = `--${TIMESTAMP}--`;\nconst ATTR_REGEXP = new RegExp(ATTR_PREFIX, \"g\");\n\nconst preparedTemplates = new WeakMap();\n\n/* istanbul ignore next */\nfunction applyShadyCSS(template, tagName) {\n  if (!tagName) return template;\n\n  return shadyCSS(shady => {\n    let map = preparedTemplates.get(template);\n    if (!map) {\n      map = new Map();\n      preparedTemplates.set(template, map);\n    }\n\n    let clone = map.get(tagName);\n\n    if (!clone) {\n      clone = document.createElement(\"template\");\n      clone.content.appendChild(template.content.cloneNode(true));\n\n      map.set(tagName, clone);\n\n      const styles = clone.content.querySelectorAll(\"style\");\n\n      Array.from(styles).forEach(style => {\n        const count = style.childNodes.length + 1;\n        for (let i = 0; i < count; i += 1) {\n          style.parentNode.insertBefore(\n            document.createTextNode(getPlaceholder()),\n            style,\n          );\n        }\n      });\n\n      shady.prepareTemplate(clone, tagName.toLowerCase());\n    }\n    return clone;\n  }, template);\n}\n\nfunction createSignature(parts, styles) {\n  let signature = parts.reduce((acc, part, index) => {\n    if (index === 0) {\n      return part;\n    }\n\n    if (\n      parts\n        .slice(index)\n        .join(\"\")\n        .match(/^\\s*<\\/\\s*(table|tr|thead|tbody|tfoot|colgroup)>/)\n    ) {\n      return `${acc}<!--${getPlaceholder(index - 1)}-->${part}`;\n    }\n    return acc + getPlaceholder(index - 1) + part;\n  }, \"\");\n\n  if (styles) {\n    signature += `<style>\\n${styles.join(\"\\n/*------*/\\n\")}\\n</style>`;\n  }\n\n  /* istanbul ignore if */\n  if (IS_IE) {\n    return signature.replace(\n      /style\\s*=\\s*([\"][^\"]+[\"]|['][^']+[']|[^\\s\"'<>/]+)/g,\n      match => `${ATTR_PREFIX}${match}`,\n    );\n  }\n\n  return signature;\n}\n\nfunction getPropertyName(string) {\n  return string\n    .replace(/\\s*=\\s*['\"]*$/g, \"\")\n    .split(/\\s+/)\n    .pop();\n}\n\nfunction replaceComments(fragment) {\n  const iterator = document.createNodeIterator(\n    fragment,\n    NodeFilter.SHOW_COMMENT,\n    null,\n    false,\n  );\n  let node;\n  // eslint-disable-next-line no-cond-assign\n  while ((node = iterator.nextNode())) {\n    if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n      node.parentNode.insertBefore(\n        document.createTextNode(node.textContent),\n        node,\n      );\n      node.parentNode.removeChild(node);\n    }\n  }\n}\n\nexport function createInternalWalker(context) {\n  let node;\n\n  return {\n    get currentNode() {\n      return node;\n    },\n    nextNode() {\n      if (node === undefined) {\n        node = context.childNodes[0];\n      } else if (node.childNodes.length) {\n        node = node.childNodes[0];\n      } else if (node.nextSibling) {\n        node = node.nextSibling;\n      } else {\n        let parentNode = node.parentNode;\n        node = parentNode.nextSibling;\n\n        while (!node && parentNode !== context) {\n          parentNode = parentNode.parentNode;\n          node = parentNode.nextSibling;\n        }\n      }\n\n      return !!node;\n    },\n  };\n}\n\nfunction createExternalWalker(context) {\n  return document.createTreeWalker(\n    context,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT,\n    null,\n    false,\n  );\n}\n\n/* istanbul ignore next */\nconst createWalker =\n  typeof window.ShadyDOM === \"object\" && window.ShadyDOM.inUse\n    ? createInternalWalker\n    : createExternalWalker;\n\nconst container = document.createElement(\"div\");\nconst styleSheetsMap = new Map();\n\nfunction normalizeWhitespace(input, startIndent = 0) {\n  input = input.replace(/(^[\\n\\s\\t ]+)|([\\n\\s\\t ]+$)+/g, \"\");\n\n  let i = input.indexOf(\"\\n\");\n  if (i > -1) {\n    let indent = 0 - startIndent - 2;\n    for (i += 1; input[i] === \" \" && i < input.length; i += 1) {\n      indent += 1;\n    }\n    return input.replace(/\\n +/g, t =>\n      t.substr(0, Math.max(t.length - indent, 1)),\n    );\n  }\n\n  return input;\n}\n\nfunction beautifyTemplateLog(input, index) {\n  const placeholder = getPlaceholder(index);\n\n  const output = normalizeWhitespace(input)\n    .split(\"\\n\")\n    .filter(i => i)\n    .map(line => {\n      const startIndex = line.indexOf(placeholder);\n\n      if (startIndex > -1) {\n        return `| ${line}\\n--${\"-\".repeat(startIndex)}${\"^\".repeat(6)}`;\n      }\n\n      return `| ${line}`;\n    })\n    .join(\"\\n\")\n    // eslint-disable-next-line no-template-curly-in-string\n    .replace(PLACEHOLDER_REGEXP_ALL, \"${...}\");\n\n  return `${output}`;\n}\n\nexport function compileTemplate(rawParts, isSVG, styles) {\n  const template = document.createElement(\"template\");\n  const parts = [];\n\n  let signature = createSignature(rawParts, styles);\n  if (isSVG) signature = `<svg>${signature}</svg>`;\n\n  /* istanbul ignore if */\n  if (IS_IE) {\n    template.innerHTML = signature;\n  } else {\n    container.innerHTML = `<template>${signature}</template>`;\n    template.content.appendChild(container.children[0].content);\n  }\n\n  if (isSVG) {\n    const svgRoot = template.content.firstChild;\n    template.content.removeChild(svgRoot);\n    Array.from(svgRoot.childNodes).forEach(node =>\n      template.content.appendChild(node),\n    );\n  }\n\n  replaceComments(template.content);\n\n  const compileWalker = createWalker(template.content);\n  let compileIndex = 0;\n\n  while (compileWalker.nextNode()) {\n    const node = compileWalker.currentNode;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n      const text = node.textContent;\n\n      if (!text.match(PLACEHOLDER_REGEXP_EQUAL)) {\n        const results = text.match(PLACEHOLDER_REGEXP_ALL);\n        if (results) {\n          let currentNode = node;\n          results\n            .reduce(\n              (acc, placeholder) => {\n                const [before, next] = acc.pop().split(placeholder);\n                if (before) acc.push(before);\n                acc.push(placeholder);\n                if (next) acc.push(next);\n                return acc;\n              },\n              [text],\n            )\n            .forEach((part, index) => {\n              if (index === 0) {\n                currentNode.textContent = part;\n              } else {\n                currentNode = currentNode.parentNode.insertBefore(\n                  document.createTextNode(part),\n                  currentNode.nextSibling,\n                );\n              }\n            });\n        }\n      }\n\n      const equal = node.textContent.match(PLACEHOLDER_REGEXP_EQUAL);\n      if (equal) {\n        /* istanbul ignore else */\n        if (!IS_IE) node.textContent = \"\";\n        parts[equal[1]] = [compileIndex, resolveValue];\n      }\n    } else {\n      /* istanbul ignore else */ // eslint-disable-next-line no-lonely-if\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        Array.from(node.attributes).forEach(attr => {\n          const value = attr.value.trim();\n          /* istanbul ignore next */\n          const name = IS_IE ? attr.name.replace(ATTR_PREFIX, \"\") : attr.name;\n          const equal = value.match(PLACEHOLDER_REGEXP_EQUAL);\n          if (equal) {\n            const propertyName = getPropertyName(rawParts[equal[1]]);\n            parts[equal[1]] = [\n              compileIndex,\n              resolveProperty(name, propertyName, isSVG),\n            ];\n            node.removeAttribute(attr.name);\n          } else {\n            const results = value.match(PLACEHOLDER_REGEXP_ALL);\n            if (results) {\n              const partialName = `attr__${name}`;\n\n              results.forEach((placeholder, index) => {\n                const [, id] = placeholder.match(PLACEHOLDER_REGEXP_EQUAL);\n                parts[id] = [\n                  compileIndex,\n                  (host, target, attrValue) => {\n                    const data = dataMap.get(target, {});\n                    data[partialName] = (data[partialName] || value).replace(\n                      placeholder,\n                      attrValue == null ? \"\" : attrValue,\n                    );\n\n                    if (results.length === 1 || index + 1 === results.length) {\n                      target.setAttribute(name, data[partialName]);\n                      data[partialName] = undefined;\n                    }\n                  },\n                ];\n              });\n\n              attr.value = \"\";\n\n              /* istanbul ignore next */\n              if (IS_IE && name !== attr.name) {\n                node.removeAttribute(attr.name);\n                node.setAttribute(name, \"\");\n              }\n            }\n          }\n        });\n      }\n    }\n\n    compileIndex += 1;\n  }\n\n  return function updateTemplateInstance(host, target, args, styleSheets) {\n    const data = dataMap.get(target, { type: \"function\" });\n\n    if (template !== data.template) {\n      if (data.template || target.nodeType === Node.ELEMENT_NODE) {\n        removeTemplate(target);\n      }\n\n      data.prevArgs = null;\n\n      const fragment = document.importNode(\n        applyShadyCSS(template, host.tagName).content,\n        true,\n      );\n\n      const renderWalker = createWalker(fragment);\n      const clonedParts = parts.slice(0);\n\n      let renderIndex = 0;\n      let currentPart = clonedParts.shift();\n\n      const markers = [];\n\n      data.template = template;\n      data.markers = markers;\n\n      while (renderWalker.nextNode()) {\n        const node = renderWalker.currentNode;\n\n        if (node.nodeType === Node.TEXT_NODE) {\n          /* istanbul ignore next */\n          if (PLACEHOLDER_REGEXP_EQUAL.test(node.textContent)) {\n            node.textContent = \"\";\n          } else if (IS_IE) {\n            node.textContent = node.textContent.replace(ATTR_REGEXP, \"\");\n          }\n        } else if (\n          process.env.NODE_ENV !== \"production\" &&\n          node.nodeType === Node.ELEMENT_NODE\n        ) {\n          if (\n            node.tagName.indexOf(\"-\") > -1 &&\n            !customElements.get(node.tagName.toLowerCase())\n          ) {\n            throw Error(\n              `Missing ${stringifyElement(\n                node,\n              )} element definition in ${stringifyElement(host)}`,\n            );\n          }\n        }\n\n        while (currentPart && currentPart[0] === renderIndex) {\n          markers.push([node, currentPart[1]]);\n          currentPart = clonedParts.shift();\n        }\n\n        renderIndex += 1;\n      }\n\n      if (target.nodeType === Node.TEXT_NODE) {\n        data.startNode = fragment.childNodes[0];\n        data.endNode = fragment.childNodes[fragment.childNodes.length - 1];\n\n        let previousChild = target;\n\n        let child = fragment.childNodes[0];\n        while (child) {\n          target.parentNode.insertBefore(child, previousChild.nextSibling);\n          previousChild = child;\n          child = fragment.childNodes[0];\n        }\n      } else {\n        target.appendChild(fragment);\n      }\n    }\n\n    const adoptedStyleSheets = target.adoptedStyleSheets;\n    if (styleSheets) {\n      let isEqual = false;\n\n      styleSheets = styleSheets.map(style => {\n        if (style instanceof CSSStyleSheet) return style;\n\n        let styleSheet = styleSheetsMap.get(style);\n        if (!styleSheet) {\n          styleSheet = new CSSStyleSheet();\n          styleSheet.replaceSync(style);\n          styleSheetsMap.set(style, styleSheet);\n        }\n        return styleSheet;\n      });\n\n      if (styleSheets.length === adoptedStyleSheets.length) {\n        isEqual = true;\n        for (let i = 0; i < styleSheets.length; i += 1) {\n          if (styleSheets[i] !== adoptedStyleSheets[i]) {\n            isEqual = false;\n            break;\n          }\n        }\n      }\n\n      if (!isEqual) target.adoptedStyleSheets = styleSheets;\n    } else if (adoptedStyleSheets && adoptedStyleSheets.length) {\n      target.adoptedStyleSheets = [];\n    }\n\n    const prevArgs = data.prevArgs;\n    data.prevArgs = args;\n\n    for (let index = 0; index < data.markers.length; index += 1) {\n      const [node, marker] = data.markers[index];\n      if (!prevArgs || prevArgs[index] !== args[index]) {\n        try {\n          marker(\n            host,\n            node,\n            args[index],\n            prevArgs ? prevArgs[index] : undefined,\n          );\n        } catch (error) {\n          if (process.env.NODE_ENV !== \"production\") {\n            // eslint-disable-next-line no-console\n            console.error(\n              `Following error was thrown when updating a template expression in ${stringifyElement(\n                host,\n              )}\\n${beautifyTemplateLog(signature, index)}`,\n            );\n          }\n          throw error;\n        }\n      }\n    }\n\n    if (target.nodeType !== Node.TEXT_NODE) {\n      shadyCSS(shady => {\n        if (host.shadowRoot) {\n          if (prevArgs) {\n            shady.styleSubtree(host);\n          } else {\n            shady.styleElement(host);\n          }\n        }\n      });\n    }\n  };\n}\n","import { storePointer } from \"../utils.js\";\n\nfunction resolveValue({ target }, setter) {\n  let value;\n\n  switch (target.type) {\n    case \"radio\":\n    case \"checkbox\":\n      value = target.checked && target.value;\n      break;\n    case \"file\":\n      value = target.files;\n      break;\n    default:\n      value = target.value;\n  }\n\n  setter(value);\n}\n\nfunction getPartialObject(name, value) {\n  return name\n    .split(\".\")\n    .reverse()\n    .reduce((acc, key) => {\n      if (!acc) return { [key]: value };\n      return { [key]: acc };\n    }, null);\n}\n\nconst stringCache = new Map();\nconst storeValues = new WeakMap();\n\nexport function set(property, valueOrPath) {\n  if (!property) {\n    throw Error(\n      `The first argument must be a property name or an object instance: ${property}`,\n    );\n  }\n\n  if (typeof property === \"object\") {\n    if (valueOrPath === undefined) {\n      throw Error(\n        \"For model instance property the second argument must be defined\",\n      );\n    }\n\n    const store = storePointer.get(property);\n\n    if (!store) {\n      throw Error(\"Provided object must be a model instance of the store\");\n    }\n\n    if (valueOrPath === null) {\n      return () => {\n        store.set(property, null);\n      };\n    }\n\n    return (host, event) => {\n      resolveValue(event, value => {\n        const values = storeValues.get(property);\n\n        if (!values) {\n          requestAnimationFrame(() => {\n            const result = storeValues.get(property);\n            storeValues.delete(property);\n\n            store\n              .set(property, result)\n              .catch(/* istanbul ignore next */ () => {});\n          });\n        }\n\n        storeValues.set(property, {\n          ...values,\n          ...getPartialObject(valueOrPath, value),\n        });\n      });\n    };\n  }\n\n  if (arguments.length === 2) {\n    return host => {\n      host[property] = valueOrPath;\n    };\n  }\n\n  let fn = stringCache.get(property);\n\n  if (!fn) {\n    fn = (host, event) => {\n      resolveValue(event, value => {\n        host[property] = value;\n      });\n    };\n\n    stringCache.set(property, fn);\n  }\n\n  return fn;\n}\n\nconst promiseMap = new WeakMap();\nexport function resolve(promise, placeholder, delay = 200) {\n  return (host, target) => {\n    let timeout;\n\n    if (placeholder) {\n      timeout = setTimeout(() => {\n        timeout = undefined;\n\n        requestAnimationFrame(() => {\n          placeholder(host, target);\n        });\n      }, delay);\n    }\n\n    promiseMap.set(target, promise);\n\n    promise.then(template => {\n      if (timeout) clearTimeout(timeout);\n\n      if (promiseMap.get(target) === promise) {\n        template(host, target);\n        promiseMap.set(target, null);\n      }\n    });\n  };\n}\n","import defineElements from \"../define.js\";\n\nimport { compileTemplate, getPlaceholder } from \"./core.js\";\nimport * as helpers from \"./helpers.js\";\n\nconst PLACEHOLDER = getPlaceholder();\nconst SVG_PLACEHOLDER = getPlaceholder(\"svg\");\nconst STYLE_IMPORT_REGEXP = /@import/;\n\nconst templatesMap = new Map();\nconst stylesMap = new WeakMap();\n\nconst methods = {\n  define(elements) {\n    defineElements(elements);\n    return this;\n  },\n  key(id) {\n    this.id = id;\n    return this;\n  },\n  style(...styles) {\n    stylesMap.set(\n      this,\n      styles.filter(style => style),\n    );\n    return this;\n  },\n};\n\nfunction create(parts, args, isSVG) {\n  const createTemplate = (host, target = host) => {\n    const styles = stylesMap.get(createTemplate);\n    let hasAdoptedStyleSheets;\n    let id = parts.join(PLACEHOLDER);\n\n    if (styles) {\n      const joinedStyles = styles.join(PLACEHOLDER);\n      hasAdoptedStyleSheets =\n        !!target.adoptedStyleSheets && !STYLE_IMPORT_REGEXP.test(joinedStyles);\n      if (!hasAdoptedStyleSheets) id += joinedStyles;\n    }\n\n    if (isSVG) id += SVG_PLACEHOLDER;\n\n    let render = templatesMap.get(id);\n    if (!render) {\n      render = compileTemplate(parts, isSVG, !hasAdoptedStyleSheets && styles);\n      templatesMap.set(id, render);\n    }\n\n    render(host, target, args, hasAdoptedStyleSheets && styles);\n  };\n\n  return Object.assign(createTemplate, methods);\n}\n\nexport function html(parts, ...args) {\n  return create(parts, args);\n}\n\nexport function svg(parts, ...args) {\n  return create(parts, args, true);\n}\n\nObject.assign(html, helpers);\nObject.assign(svg, helpers);\n"],"sourceRoot":""}